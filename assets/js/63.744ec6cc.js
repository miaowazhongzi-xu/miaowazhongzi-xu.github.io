(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{1305:function(s,t,n){"use strict";n.r(t);var a=n(3),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"selenium的其它使用方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#selenium的其它使用方法"}},[s._v("#")]),s._v(" selenium的其它使用方法")]),s._v(" "),n("h5",{attrs:{id:"知识点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#知识点"}},[s._v("#")]),s._v(" 知识点：")]),s._v(" "),n("ul",[n("li",[s._v("掌握 selenium控制标签页的切换")]),s._v(" "),n("li",[s._v("掌握 selenium控制iframe的切换")]),s._v(" "),n("li",[s._v("掌握 利用selenium获取cookie的方法")]),s._v(" "),n("li",[s._v("掌握 手动实现页面等待")]),s._v(" "),n("li",[s._v("掌握 selenium控制浏览器执行js代码的方法")]),s._v(" "),n("li",[s._v("掌握 selenium开启无界面模式")]),s._v(" "),n("li",[s._v("了解 selenium使用代理ip")]),s._v(" "),n("li",[s._v("了解 selenium替换user-agent")])]),s._v(" "),n("hr"),s._v(" "),n("h3",{attrs:{id:"_1-selenium标签页的切换"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-selenium标签页的切换"}},[s._v("#")]),s._v(" 1. selenium标签页的切换")]),s._v(" "),n("blockquote",[n("p",[s._v("当selenium控制浏览器打开多个标签页时，如何控制浏览器在不同的标签页中进行切换呢？需要我们做以下两步：")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("获取所有标签页的窗口句柄")])]),s._v(" "),n("li",[n("p",[s._v("利用窗口句柄字切换到句柄指向的标签页")]),s._v(" "),n("ul",[n("li",[s._v("这里的窗口句柄是指：指向标签页对象的标识")]),s._v(" "),n("li",[n("a",{attrs:{href:"https://baike.baidu.com/item/%E5%8F%A5%E6%9F%84/3527587?fr=aladdin",target:"_blank",rel:"noopener noreferrer"}},[s._v("关于句柄请课后了解更多，本小节不做展开"),n("OutboundLink")],1)])])]),s._v(" "),n("li",[n("p",[s._v("具体的方法")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 1. 获取当前所有的标签页的句柄构成的列表\ncurrent_windows = driver.window_handles\n\n# 2. 根据标签页句柄列表索引下标进行切换\ndriver.switch_to.window(current_windows[0])\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("参考代码示例：")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" time\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" selenium "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" webdriver\n\ndriver "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" webdriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Chrome"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://www.baidu.com/"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\ntime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sleep"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find_element_by_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'kw'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("send_keys"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'python'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ntime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sleep"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find_element_by_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'su'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("click"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ntime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sleep"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过执行js来新开一个标签页")]),s._v("\njs "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'window.open(\"https://www.sogou.com\");'")]),s._v("\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("execute_script"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("js"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ntime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sleep"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1. 获取当前所有的窗口")]),s._v("\nwindows "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" driver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("window_handles\n\ntime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sleep"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. 根据窗口索引进行切换")]),s._v("\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("switch_to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("windows"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ntime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sleep"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("switch_to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("windows"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\ntime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sleep"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("quit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br")])])])]),s._v(" "),n("hr"),s._v(" "),n("h5",{attrs:{id:"知识点-掌握-selenium控制标签页的切换"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#知识点-掌握-selenium控制标签页的切换"}},[s._v("#")]),s._v(" 知识点：掌握 selenium控制标签页的切换")]),s._v(" "),n("hr"),s._v(" "),n("h3",{attrs:{id:"_2-switch-to切换frame标签"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-switch-to切换frame标签"}},[s._v("#")]),s._v(" 2. switch_to切换frame标签")]),s._v(" "),n("blockquote",[n("h5",{attrs:{id:"iframe是html中常用的一种技术-即一个页面中嵌套了另一个网页-selenium默认是访问不了frame中的内容的-对应的解决思路是driver-switch-to-frame-frame-element-。接下来我们通过qq邮箱模拟登陆来学习这个知识点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#iframe是html中常用的一种技术-即一个页面中嵌套了另一个网页-selenium默认是访问不了frame中的内容的-对应的解决思路是driver-switch-to-frame-frame-element-。接下来我们通过qq邮箱模拟登陆来学习这个知识点"}},[s._v("#")]),s._v(" iframe是html中常用的一种技术，即一个页面中嵌套了另一个网页，selenium默认是访问不了frame中的内容的，对应的解决思路是"),n("code",[s._v("driver.switch_to.frame(frame_element)")]),s._v("。接下来我们通过qq邮箱模拟登陆来学习这个知识点")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("参考代码：")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" time\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" selenium "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" webdriver\n\ndriver "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" webdriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Chrome"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nurl "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://mail.qq.com/cgi-bin/loginpage'")]),s._v("\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ntime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sleep"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nlogin_frame "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" driver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find_element_by_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'login_frame'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 根据id定位 frame元素")]),s._v("\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("switch_to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("frame"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("login_frame"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 转向到该frame中")]),s._v("\n\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find_element_by_xpath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'//*[@id=\"u\"]'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("send_keys"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1596930226@qq.com'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ntime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sleep"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find_element_by_xpath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'//*[@id=\"p\"]'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("send_keys"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hahamimashicuode'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ntime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sleep"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find_element_by_xpath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'//*[@id=\"login_button\"]'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("click"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ntime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sleep"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""操作frame外边的元素需要切换出去"""')]),s._v("\nwindows "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" driver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("window_handles\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("switch_to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("windows"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\ncontent "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" driver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find_element_by_class_name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'login_pictures_title'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("text\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("content"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("quit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("总结：")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("切换到定位的frame标签嵌套的页面中")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("driver.switch_to.frame(通过find_element_by函数定位的frame、iframe标签对象)")])])])]),s._v(" "),n("li",[n("p",[s._v("利用切换标签页的方式切出frame标签")]),s._v(" "),n("ul",[n("li",[n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("windows = driver.window_handles\ndriver.switch_to.window(windows[0])\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])])])])])])])]),s._v(" "),n("hr"),s._v(" "),n("h5",{attrs:{id:"知识点-掌握-selenium控制frame标签的切换"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#知识点-掌握-selenium控制frame标签的切换"}},[s._v("#")]),s._v(" 知识点：掌握 selenium控制frame标签的切换")]),s._v(" "),n("hr"),s._v(" "),n("h3",{attrs:{id:"_3-selenium对cookie的处理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-selenium对cookie的处理"}},[s._v("#")]),s._v(" 3. selenium对cookie的处理")]),s._v(" "),n("blockquote",[n("p",[s._v("selenium能够帮助我们处理页面中的cookie，比如获取、删除，接下来我们就学习这部分知识")])]),s._v(" "),n("h4",{attrs:{id:"_3-1-获取cookie"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-获取cookie"}},[s._v("#")]),s._v(" 3.1 获取cookie")]),s._v(" "),n("blockquote",[n("p",[n("code",[s._v("driver.get_cookies()")]),s._v("返回列表，其中包含的是完整的cookie信息！不光有name、value，还有domain等cookie其他维度的信息。所以如果想要把获取的cookie信息和requests模块配合使用的话，需要转换为name、value作为键值对的cookie字典")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 获取当前标签页的全部cookie信息\nprint(driver.get_cookies())\n# 把cookie转化为字典\ncookies_dict = {cookie[‘name’]: cookie[‘value’] for cookie in driver.get_cookies()}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h4",{attrs:{id:"_3-2-删除cookie"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-删除cookie"}},[s._v("#")]),s._v(" 3.2 删除cookie")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('#删除一条cookie\ndriver.delete_cookie("CookieName")\n\n# 删除所有的cookie\ndriver.delete_all_cookies()\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("hr"),s._v(" "),n("h5",{attrs:{id:"知识点-掌握-利用selenium获取cookie的方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#知识点-掌握-利用selenium获取cookie的方法"}},[s._v("#")]),s._v(" 知识点：掌握 利用selenium获取cookie的方法")]),s._v(" "),n("hr"),s._v(" "),n("h3",{attrs:{id:"_4-selenium控制浏览器执行js代码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-selenium控制浏览器执行js代码"}},[s._v("#")]),s._v(" 4. selenium控制浏览器执行js代码")]),s._v(" "),n("blockquote",[n("p",[s._v("selenium可以让浏览器执行我们规定的js代码，运行下列代码查看运行效果")])]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" time\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" selenium "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" webdriver\n\ndriver "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" webdriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Chrome"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://www.itcast.cn/"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ntime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sleep"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\njs "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'window.scrollTo(0,document.body.scrollHeight)'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# js语句")]),s._v("\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("execute_script"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("js"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行js的方法")]),s._v("\n\ntime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sleep"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("quit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("ul",[n("li",[s._v("执行js的方法："),n("code",[s._v("driver.execute_script(js)")])])]),s._v(" "),n("hr"),s._v(" "),n("h5",{attrs:{id:"知识点-掌握-selenium控制浏览器执行js代码的方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#知识点-掌握-selenium控制浏览器执行js代码的方法"}},[s._v("#")]),s._v(" 知识点：掌握 selenium控制浏览器执行js代码的方法")]),s._v(" "),n("hr"),s._v(" "),n("h3",{attrs:{id:"_5-页面等待"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-页面等待"}},[s._v("#")]),s._v(" 5. 页面等待")]),s._v(" "),n("blockquote",[n("p",[s._v("页面在加载的过程中需要花费时间等待网站服务器的响应，在这个过程中标签元素有可能还没有加载出来，是不可见的，如何处理这种情况呢？")])]),s._v(" "),n("ol",[n("li",[s._v("页面等待分类")]),s._v(" "),n("li",[s._v("强制等待介绍")]),s._v(" "),n("li",[s._v("显式等待介绍")]),s._v(" "),n("li",[s._v("隐式等待介绍")]),s._v(" "),n("li",[s._v("手动实现页面等待")])]),s._v(" "),n("h4",{attrs:{id:"_5-1-页面等待的分类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-页面等待的分类"}},[s._v("#")]),s._v(" 5.1 页面等待的分类")]),s._v(" "),n("blockquote",[n("p",[s._v("首先我们就来了解以下selenium页面等待的分类")])]),s._v(" "),n("ol",[n("li",[s._v("强制等待")]),s._v(" "),n("li",[s._v("隐式等待")]),s._v(" "),n("li",[s._v("显式等待")])]),s._v(" "),n("h4",{attrs:{id:"_5-2-强制等待-了解"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-强制等待-了解"}},[s._v("#")]),s._v(" 5.2 强制等待（了解）")]),s._v(" "),n("ul",[n("li",[s._v("其实就是time.sleep()")]),s._v(" "),n("li",[s._v("缺点时不智能，设置的时间太短，元素还没有加载出来；设置的时间太长，则会浪费时间")])]),s._v(" "),n("h4",{attrs:{id:"_5-3-隐式等待"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-隐式等待"}},[s._v("#")]),s._v(" 5.3 隐式等待")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("隐式等待针对的是元素定位，隐式等待设置了一个时间，在一段时间内判断元素是否定位成功，如果完成了，就进行下一步")])]),s._v(" "),n("li",[n("p",[s._v("在设置的时间内没有定位成功，则会报超时加载")])]),s._v(" "),n("li",[n("p",[s._v("示例代码")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("from selenium import webdriver\n\ndriver = webdriver.Chrome()  \n\ndriver.implicitly_wait(10) # 隐式等待，最长等20秒  \n\ndriver.get('https://www.baidu.com')\n\ndriver.find_element_by_xpath()\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])])])]),s._v(" "),n("h4",{attrs:{id:"_5-4-显式等待-了解"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-显式等待-了解"}},[s._v("#")]),s._v(" 5.4 显式等待（了解）")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("每经过多少秒就查看一次等待条件是否达成，如果达成就停止等待，继续执行后续代码")])]),s._v(" "),n("li",[n("p",[s._v("如果没有达成就继续等待直到超过规定的时间后，报超时异常")])]),s._v(" "),n("li",[n("p",[s._v("示例代码")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("from selenium import webdriver  \nfrom selenium.webdriver.support.wait import WebDriverWait  \nfrom selenium.webdriver.support import expected_conditions as EC  \nfrom selenium.webdriver.common.by import By \n\ndriver = webdriver.Chrome()\n\ndriver.get('https://www.baidu.com')\n\n# 显式等待\nWebDriverWait(driver, 20, 0.5).until(\n    EC.presence_of_element_located((By.LINK_TEXT, '好123')))  \n# 参数20表示最长等待20秒\n# 参数0.5表示0.5秒检查一次规定的标签是否存在\n# EC.presence_of_element_located((By.LINK_TEXT, '好123')) 表示通过链接文本内容定位标签\n# 每0.5秒一次检查，通过链接文本内容定位标签是否存在，如果存在就向下继续执行；如果不存在，直到20秒上限就抛出异常\n\nprint(driver.find_element_by_link_text('好123').get_attribute('href'))\ndriver.quit() \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])])])]),s._v(" "),n("h4",{attrs:{id:"_5-5-手动实现页面等待"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-手动实现页面等待"}},[s._v("#")]),s._v(" 5.5 手动实现页面等待")]),s._v(" "),n("blockquote",[n("p",[s._v("在了解了隐式等待和显式等待以及强制等待后，我们发现并没有一种通用的方法来解决页面等待的问题，比如“页面需要滑动才能触发ajax异步加载”的场景，那么接下来我们就以"),n("a",{attrs:{href:"https://www.taobao.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("淘宝网首页"),n("OutboundLink")],1),s._v("为例，手动实现页面等待")])]),s._v(" "),n("ul",[n("li",[s._v("原理：\n"),n("ul",[n("li",[s._v("利用强制等待和显式等待的思路来手动实现")]),s._v(" "),n("li",[s._v("不停的判断或有次数限制的判断某一个标签对象是否加载完毕（是否存在）")])])]),s._v(" "),n("li",[s._v("实现代码如下：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import time\nfrom selenium import webdriver\ndriver = webdriver.Chrome('/home/worker/Desktop/driver/chromedriver')\n\ndriver.get('https://www.taobao.com/')\ntime.sleep(1)\n\n# i = 0\n# while True:\nfor i in range(10):\n    i += 1\n    try:\n        time.sleep(3)\n        element = driver.find_element_by_xpath('//div[@class=\"shop-inner\"]/h3[1]/a')\n        print(element.get_attribute('href'))\n        break\n    except:\n        js = 'window.scrollTo(0, {})'.format(i*500) # js语句\n        driver.execute_script(js) # 执行js的方法\ndriver.quit()\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("hr"),s._v(" "),n("h5",{attrs:{id:"知识点-掌握-手动实现页面等待"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#知识点-掌握-手动实现页面等待"}},[s._v("#")]),s._v(" 知识点：掌握 手动实现页面等待")]),s._v(" "),n("hr"),s._v(" "),n("h3",{attrs:{id:"_6-selenium开启无界面模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-selenium开启无界面模式"}},[s._v("#")]),s._v(" 6. selenium开启无界面模式")]),s._v(" "),n("blockquote",[n("p",[s._v("绝大多数服务器是没有界面的，selenium控制谷歌浏览器也是存在无界面模式的，这一小节我们就来学习如何开启无界面模式（又称之为无头模式）")])]),s._v(" "),n("ul",[n("li",[s._v("开启无界面模式的方法\n"),n("ul",[n("li",[s._v("实例化配置对象\n"),n("ul",[n("li",[n("code",[s._v("options = webdriver.ChromeOptions()")])])])]),s._v(" "),n("li",[s._v("配置对象添加开启无界面模式的命令\n"),n("ul",[n("li",[n("code",[s._v('options.add_argument("--headless")')])])])]),s._v(" "),n("li",[s._v("配置对象添加禁用gpu的命令\n"),n("ul",[n("li",[n("code",[s._v('options.add_argument("--disable-gpu")')])])])]),s._v(" "),n("li",[s._v("实例化带有配置对象的driver对象\n"),n("ul",[n("li",[n("code",[s._v("driver = webdriver.Chrome(chrome_options=options)")])])])])])]),s._v(" "),n("li",[s._v("注意：macos中chrome浏览器59+版本，Linux中57+版本才能使用无界面模式！")]),s._v(" "),n("li",[s._v("参考代码如下：")])]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" selenium "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" webdriver\n\noptions "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" webdriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ChromeOptions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个配置对象")]),s._v("\noptions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("add_argument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"--headless"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启无界面模式")]),s._v("\noptions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("add_argument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"--disable-gpu"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 禁用gpu")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# options.set_headles() # 无界面模式的另外一种开启方式")]),s._v("\ndriver "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" webdriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Chrome"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("chrome_options"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 实例化带有配置的driver对象")]),s._v("\n\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http://www.itcast.cn'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("driver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("title"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("quit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("hr"),s._v(" "),n("h5",{attrs:{id:"知识点-掌握-selenium开启无界面模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#知识点-掌握-selenium开启无界面模式"}},[s._v("#")]),s._v(" 知识点：掌握 selenium开启无界面模式")]),s._v(" "),n("hr"),s._v(" "),n("h3",{attrs:{id:"_7-selenium使用代理ip"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7-selenium使用代理ip"}},[s._v("#")]),s._v(" 7. selenium使用代理ip")]),s._v(" "),n("blockquote",[n("p",[s._v("selenium控制浏览器也是可以使用代理ip的！")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("使用代理ip的方法")]),s._v(" "),n("ul",[n("li",[s._v("实例化配置对象\n"),n("ul",[n("li",[n("code",[s._v("options = webdriver.ChromeOptions()")])])])]),s._v(" "),n("li",[s._v("配置对象添加使用代理ip的命令\n"),n("ul",[n("li",[n("code",[s._v("options.add_argument('--proxy-server=http://202.20.16.82:9527')")])])])]),s._v(" "),n("li",[s._v("实例化带有配置对象的driver对象\n"),n("ul",[n("li",[n("code",[s._v("driver = webdriver.Chrome('./chromedriver', chrome_options=options)")])])])])])]),s._v(" "),n("li",[n("p",[s._v("参考代码如下：")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" selenium "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" webdriver\n\noptions "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" webdriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ChromeOptions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个配置对象")]),s._v("\noptions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("add_argument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'--proxy-server=http://202.20.16.82:9527'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用代理ip")]),s._v("\n\ndriver "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" webdriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Chrome"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("chrome_options"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 实例化带有配置的driver对象")]),s._v("\n\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http://www.itcast.cn'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("driver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("title"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("quit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])])])]),s._v(" "),n("hr"),s._v(" "),n("h5",{attrs:{id:"知识点-了解-selenium使用代理ip"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#知识点-了解-selenium使用代理ip"}},[s._v("#")]),s._v(" 知识点：了解 selenium使用代理ip")]),s._v(" "),n("hr"),s._v(" "),n("h3",{attrs:{id:"_8-selenium替换user-agent"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_8-selenium替换user-agent"}},[s._v("#")]),s._v(" 8. selenium替换user-agent")]),s._v(" "),n("blockquote",[n("p",[s._v("selenium控制谷歌浏览器时，User-Agent默认是谷歌浏览器的，这一小节我们就来学习使用不同的User-Agent")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("替换user-agent的方法")]),s._v(" "),n("ul",[n("li",[s._v("实例化配置对象\n"),n("ul",[n("li",[n("code",[s._v("options = webdriver.ChromeOptions()")])])])]),s._v(" "),n("li",[s._v("配置对象添加替换UA的命令\n"),n("ul",[n("li",[n("code",[s._v("options.add_argument('--user-agent=Mozilla/5.0 HAHA')")])])])]),s._v(" "),n("li",[s._v("实例化带有配置对象的driver对象\n"),n("ul",[n("li",[n("code",[s._v("driver = webdriver.Chrome('./chromedriver', chrome_options=options)")])])])])])]),s._v(" "),n("li",[n("p",[s._v("参考代码如下：")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" selenium "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" webdriver\n\noptions "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" webdriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ChromeOptions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个配置对象")]),s._v("\noptions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("add_argument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'--user-agent=Mozilla/5.0 HAHA'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 替换User-Agent")]),s._v("\n\ndriver "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" webdriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Chrome"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./chromedriver'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" chrome_options"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http://www.itcast.cn'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("driver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("title"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("quit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])])])]),s._v(" "),n("hr"),s._v(" "),n("h5",{attrs:{id:"知识点-了解-selenium替换user-agent"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#知识点-了解-selenium替换user-agent"}},[s._v("#")]),s._v(" 知识点：了解 selenium替换user-agent")]),s._v(" "),n("hr")])}),[],!1,null,null,null);t.default=e.exports}}]);