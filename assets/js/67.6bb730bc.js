(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{1314:function(e,s,a){"use strict";a.r(s);var t=a(3),n=Object(t.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"mongodb的的增删改查"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongodb的的增删改查"}},[e._v("#")]),e._v(" Mongodb的的增删改查")]),e._v(" "),a("h5",{attrs:{id:"学习目标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#学习目标"}},[e._v("#")]),e._v(" 学习目标")]),e._v(" "),a("ol",[a("li",[e._v("掌握 mongodb插入数据的方法")]),e._v(" "),a("li",[e._v("掌握 mongodb保存数据的方法")]),e._v(" "),a("li",[e._v("掌握 mongodb查询数据的方法")]),e._v(" "),a("li",[e._v("掌握 mongodb查询结果的处理方法")]),e._v(" "),a("li",[e._v("掌握 mongodb更新数据的方法")]),e._v(" "),a("li",[e._v("掌握 mongodb删除数据的方法")])]),e._v(" "),a("hr"),e._v(" "),a("h3",{attrs:{id:"_1-mongodb插入数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-mongodb插入数据"}},[e._v("#")]),e._v(" 1. mongodb插入数据")]),e._v(" "),a("p",[e._v("命令："),a("code",[e._v("db.集合名称.insert(document)")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("db.stu.insert({name:'gj', gender:1})\ndb.stu.insert({_id:\"20170101\", name:'gj', gender:1})\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("插文档时，如果不指定_id参数，MongoDB会为文档自动分配一个唯一的ObjectId")]),e._v(" "),a("h3",{attrs:{id:"_2-mongodb的保存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-mongodb的保存"}},[e._v("#")]),e._v(" 2. mongodb的保存")]),e._v(" "),a("p",[e._v("命令："),a("code",[e._v("db.集合名称.save(document)")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("db.stu.save({_id:'20170101', name:'gj', gender:2})\ndb.stu.save({name:'gj', gender:2})\ndb.stu.find()\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("如果文档的_id已经存在则修改，如果_id不存在则添加")]),e._v(" "),a("h3",{attrs:{id:"_3-mongodb的查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-mongodb的查询"}},[e._v("#")]),e._v(" 3 mongodb的查询")]),e._v(" "),a("p",[e._v("命令："),a("code",[e._v("db.集合名称.find()")])]),e._v(" "),a("blockquote",[a("p",[e._v("可以使用以下数据进行练习")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('db.stu.insert([{"name" : "郭靖", "hometown" : "蒙古", "age" : 20, "gender" : true },\n{"name" : "黄蓉", "hometown" : "桃花岛", "age" : 18, "gender" : false },\n{"name" : "华筝", "hometown" : "蒙古", "age" : 18, "gender" : false },\n{"name" : "黄药师", "hometown" : "桃花岛", "age" : 40, "gender" : true },\n{"name" : "段誉", "hometown" : "大理", "age" : 16, "gender" : true },\n{"name" : "段王爷", "hometown" : "大理", "age" : 45, "gender" : true },\n{"name" : "洪七公", "hometown" : "华筝", "age" : 18, "gender" : true }])\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("h4",{attrs:{id:"_3-1-简单查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-简单查询"}},[e._v("#")]),e._v(" 3.1 简单查询")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("方法find()： 查询")]),e._v(" "),a("p",[a("code",[e._v("db.集合名称.find({条件文档})")])])]),e._v(" "),a("li",[a("p",[e._v("方法findOne()：查询，只返回第一个")]),e._v(" "),a("p",[a("code",[e._v("db.集合名称.findOne({条件文档})")])])]),e._v(" "),a("li",[a("p",[e._v("方法pretty()： 将结果格式化；不能和findOne()一起使用！")]),e._v(" "),a("p",[a("code",[e._v("db.集合名称.find({条件文档}).pretty()")])])])]),e._v(" "),a("h4",{attrs:{id:"_3-2-比较运算符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-比较运算符"}},[e._v("#")]),e._v(" 3.2 比较运算符")]),e._v(" "),a("ul",[a("li",[e._v("等于： 默认是等于判断， 没有运算符")]),e._v(" "),a("li",[e._v("小于："),a("code",[e._v("$lt （less than）")])]),e._v(" "),a("li",[e._v("小于等于："),a("code",[e._v("$lte （less than equal）")])]),e._v(" "),a("li",[e._v("大于："),a("code",[e._v("$gt （greater than）")])]),e._v(" "),a("li",[e._v("大于等于："),a("code",[e._v("$gte")])]),e._v(" "),a("li",[e._v("不等于："),a("code",[e._v("$ne")])])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("查询年龄大于18的所有学生\ndb.stu.find({age:{$gte:18}})\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("h4",{attrs:{id:"_3-3-逻辑运算符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-逻辑运算符"}},[e._v("#")]),e._v(" 3.3 逻辑运算符")]),e._v(" "),a("blockquote",[a("p",[e._v("逻辑运算符主要指与、或逻辑")])]),e._v(" "),a("ul",[a("li",[e._v("and：在json中写多个条件即可")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("查询年龄大于或等于18， 并且性别为true的学生\ndb.stu.find({age:{$gte:18},gender:true})\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("ul",[a("li",[e._v("or:使用$or， 值为数组， 数组中每个元素为json")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("查询年龄大于18， 或性别为false的学生\ndb.stu.find({$or:[{age:{$gt:18}},{gender:false}]})\n\n查询年龄大于18或性别为男生， 并且姓名是郭靖\ndb.stu.find({$or:[{age:{$gte:18}},{gender:true}],name:'gj'})\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("h4",{attrs:{id:"_3-4-范围运算符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-范围运算符"}},[e._v("#")]),e._v(" 3.4 范围运算符")]),e._v(" "),a("p",[e._v("使用"),a("code",[e._v("$in")]),e._v("， "),a("code",[e._v("$nin")]),e._v(" 判断数据是否在某个数组内")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("查询年龄为18、 28的学生\ndb.stu.find({age:{$in:[18,28,38]}})\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("h4",{attrs:{id:"_3-5-支持正则表达式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-支持正则表达式"}},[e._v("#")]),e._v(" 3.5 支持正则表达式")]),e._v(" "),a("p",[e._v("使用$regex编写正则表达式")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("查询name以'黄'开头的数据\ndb.stu.find({name:{$regex:'^黄'}})\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("h4",{attrs:{id:"_3-6-自定义查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-自定义查询"}},[e._v("#")]),e._v(" 3.6 自定义查询")]),e._v(" "),a("blockquote",[a("p",[e._v("mongo shell 是一个js的执行环境\n使用$where 写一个函数， 返回满足条件的数据")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("查询年龄大于30的学生\ndb.stu.find({\n $where:function() {\n     return this.age>30;}\n})\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("h4",{attrs:{id:"_3-7-skip和limit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-skip和limit"}},[e._v("#")]),e._v(" 3.7 skip和limit")]),e._v(" "),a("ul",[a("li",[e._v("方法limit()： 用于读取指定数量的文档")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("db.集合名称.find().limit(NUMBER)\n查询2条学生信息\ndb.stu.find().limit(2)\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("ul",[a("li",[e._v("方法skip()： 用于跳过指定数量的⽂档")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("db.集合名称.find().skip(NUMBER)\ndb.stu.find().skip(2)\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("ul",[a("li",[e._v("同时使用")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("db.stu.find().limit(4).skip(5)\ndb.stu.find().skip(5).limit(4)\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("注意：先使用skip在使用limit的效率要高于前者")]),e._v(" "),a("h4",{attrs:{id:"_3-8-投影"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-8-投影"}},[e._v("#")]),e._v(" 3.8 投影")]),e._v(" "),a("p",[e._v("在查询到的返回结果中， 只选择必要的字段")]),e._v(" "),a("p",[e._v("命令："),a("code",[e._v("db.集合名称.find({},{字段名称:1,...})")])]),e._v(" "),a("p",[e._v("参数为字段与值， 值为1表示显示， 值为0不显\n特别注意：")]),e._v(" "),a("ul",[a("li",[e._v("对于_id列默认是显示的， 如果不显示需要明确设置为0")]),e._v(" "),a("li",[e._v("对于其他不显示的字段不能设置为0")])]),e._v(" "),a("p",[a("code",[e._v("db.stu.find({},{_id:0,name:1,gender:1})")])]),e._v(" "),a("h4",{attrs:{id:"_3-9-排序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-9-排序"}},[e._v("#")]),e._v(" 3.9 排序")]),e._v(" "),a("p",[e._v("方法sort()， 用于对查询结果按照指定的字段进行排序")]),e._v(" "),a("p",[e._v("命令："),a("code",[e._v("db.集合名称.find().sort({字段:1,...})")])]),e._v(" "),a("p",[e._v("参数1为升序排列\n参数-1为降序排列")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("根据性别降序， 再根据年龄升序\ndb.stu.find().sort({gender:-1,age:1})\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("h4",{attrs:{id:"_3-10-统计个数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-10-统计个数"}},[e._v("#")]),e._v(" 3.10 统计个数")]),e._v(" "),a("p",[e._v("方法count()用于统计结果集中文档条数")]),e._v(" "),a("p",[e._v("命令："),a("code",[e._v("db.集合名称.find({条件}).count()")]),e._v("\n命令："),a("code",[e._v("db.集合名称.count({条件})")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("db.stu.find({gender:true}).count()\ndb.stu.count({age:{$gt:20},gender:true})\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("h3",{attrs:{id:"_4-mongodb的更新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-mongodb的更新"}},[e._v("#")]),e._v(" 4 mongodb的更新")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("db.集合名称.update({query}, {update}, {multi: boolean})\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[e._v("参数query:查询条件")]),e._v(" "),a("li",[e._v("参数update:更新操作符")]),e._v(" "),a("li",[e._v("参数multi:可选，默认是false，表示只更新找到的第一条数据，值为true表示把满足条件的数据全部更新")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("db.stu.update({name:'hr'},{name:'mnc'})           # 全文档进行覆盖更新\ndb.stu.update({name:'hr'},{$set:{name:'hys'}})    # 指定键值更新操作\ndb.stu.update({},{$set:{gender:0}},{multi:true})  # 更新全部\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v('注意："multi update only works with $ operators"')]),e._v(" "),a("ul",[a("li",[e._v("multi参数必须和$set一起使用！")])]),e._v(" "),a("h3",{attrs:{id:"_5-mongodb的删除"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-mongodb的删除"}},[e._v("#")]),e._v(" 5 mongodb的删除")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("db.集合名称.remove({query}, {justOne: boolean})\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("- 参数query:可选，删除的⽂档的条件\n- 参数justOne:可选， 如果设为true或1，则只删除一条，默认false，表示删除全部\n")])])]),a("h2",{attrs:{id:"小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[e._v("#")]),e._v(" 小结")]),e._v(" "),a("ol",[a("li",[e._v("mongo shell中的增\ndb.集合名.insert({数据})\ndb.集合名.save({包含_id的完整数据}) # 根据指定的_id进行保存，存在则更新，不存在则插入")]),e._v(" "),a("li",[e._v("mongo shell中的删\ndb.集合名.remove({条件}, {justOne: true/false})")]),e._v(" "),a("li",[e._v("mongo shell中的改\ndb.集合名.update({条件}, {$set:{完整数据/部分字段}}, {multi: true/false})")]),e._v(" "),a("li",[e._v("mongo shell中的查\ndb.集合名.find({条件}, {字段投影})")])]),e._v(" "),a("hr")])}),[],!1,null,null,null);s.default=n.exports}}]);