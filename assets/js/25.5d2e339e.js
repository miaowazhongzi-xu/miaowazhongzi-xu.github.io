(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1061:function(t,a,s){t.exports=s.p+"assets/img/xpath_helper-1.c6fbc026.png"},1062:function(t,a,s){t.exports=s.p+"assets/img/xpath_helper-2.8fd63b5a.png"},1063:function(t,a,s){t.exports=s.p+"assets/img/xpath_helper-3.464591c6.png"},1064:function(t,a,s){t.exports=s.p+"assets/img/node.12901937.png"},1065:function(t,a,s){t.exports=s.p+"assets/img/xpathnode.e6627fb1.png"},1302:function(t,a,s){"use strict";s.r(a);var n=s(3),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"数据提取-lxml模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据提取-lxml模块"}},[t._v("#")]),t._v(" 数据提取-lxml模块")]),t._v(" "),n("h5",{attrs:{id:"知识点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#知识点"}},[t._v("#")]),t._v(" 知识点")]),t._v(" "),n("ul",[n("li",[t._v("了解 lxml模块和xpath语法的关系")]),t._v(" "),n("li",[t._v("了解 lxml模块的使用场景")]),t._v(" "),n("li",[t._v("了解 lxml模块的安装")]),t._v(" "),n("li",[t._v("了解 谷歌浏览器xpath helper插件的安装和使用")]),t._v(" "),n("li",[t._v("掌握 xpath语法-基础节点选择语法")]),t._v(" "),n("li",[t._v("掌握 xpath语法-节点修饰语法")]),t._v(" "),n("li",[t._v("掌握 xpath语法-其他常用语法")]),t._v(" "),n("li",[t._v("掌握 lxml模块中使用xpath语法定位元素提取属性值或文本内容")]),t._v(" "),n("li",[t._v("掌握 lxml模块中etree.tostring函数的使用")])]),t._v(" "),n("hr"),t._v(" "),n("h2",{attrs:{id:"_1-了解-lxml模块和xpath语法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-了解-lxml模块和xpath语法"}},[t._v("#")]),t._v(" 1. 了解 lxml模块和xpath语法")]),t._v(" "),n("blockquote",[n("p",[t._v("对html或xml形式的文本提取特定的内容，就需要我们掌握lxml模块的使用和xpath语法。")])]),t._v(" "),n("ul",[n("li",[t._v("lxml模块可以利用XPath规则语法，来快速的定位HTML/XML 文档中特定元素以及获取节点信息（文本内容、属性值）")]),t._v(" "),n("li",[t._v("XPath (XML Path Language) 是一门在 HTML/XML 文档中查找信息的"),n("strong",[t._v("语言")]),t._v("，可用来在 HTML/XML 文档中对"),n("strong",[t._v("元素和属性进行遍历")]),t._v("。\n"),n("ul",[n("li",[t._v("W3School官方文档："),n("a",{attrs:{href:"http://www.w3school.com.cn/xpath/index.asp",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.w3school.com.cn/xpath/index.asp"),n("OutboundLink")],1)])])]),t._v(" "),n("li",[t._v("提取xml、html中的数据需要lxml模块和xpath语法配合使用")])]),t._v(" "),n("hr"),t._v(" "),n("h5",{attrs:{id:"知识点-了解-lxml模块和xpath语法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#知识点-了解-lxml模块和xpath语法"}},[t._v("#")]),t._v(" 知识点：了解 lxml模块和xpath语法")]),t._v(" "),n("hr"),t._v(" "),n("h2",{attrs:{id:"_2-谷歌浏览器xpath-helper插件的安装和使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-谷歌浏览器xpath-helper插件的安装和使用"}},[t._v("#")]),t._v(" 2. 谷歌浏览器xpath helper插件的安装和使用")]),t._v(" "),n("blockquote",[n("p",[t._v("要想利用lxml模块提取数据，需要我们掌握xpath语法规则。接下来我们就来了解一下xpath helper插件，它可以帮助我们练习xpath语法")])]),t._v(" "),n("h3",{attrs:{id:"_2-1-谷歌浏览器xpath-helper插件的作用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-谷歌浏览器xpath-helper插件的作用"}},[t._v("#")]),t._v(" 2.1 谷歌浏览器xpath helper插件的作用")]),t._v(" "),n("blockquote",[n("p",[t._v("在谷歌浏览器中对当前页面测试xpath语法规则")])]),t._v(" "),n("h3",{attrs:{id:"_2-2-谷歌浏览器xpath-helper插件的安装和使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-谷歌浏览器xpath-helper插件的安装和使用"}},[t._v("#")]),t._v(" 2.2 谷歌浏览器xpath helper插件的安装和使用")]),t._v(" "),n("blockquote",[n("p",[t._v("我们以windos为例进行xpath helper的安装")])]),t._v(" "),n("h4",{attrs:{id:"_2-2-1-xpath-helper插件的安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-xpath-helper插件的安装"}},[t._v("#")]),t._v(" 2.2.1 xpath helper插件的安装")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("下载Chrome插件 XPath Helper")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("可以在chrome应用商城进行下载，如果无法下载，也可以从下面的链接进行下载")])]),t._v(" "),n("li",[n("p",[t._v("下载地址："),n("a",{attrs:{href:"https://pan.baidu.com/s/1UM94dcwgus4SgECuoJ-Jcg",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://pan.baidu.com/s/1UM94dcwgus4SgECuoJ-Jcg"),n("OutboundLink")],1),t._v(" 密码:337b")])])])]),t._v(" "),n("li",[n("p",[t._v("把文件的后缀名crx改为rar，然后解压到同名文件夹中")])]),t._v(" "),n("li",[n("p",[t._v("把解压后的文件夹拖入到已经开启开发者模式的chrome浏览器扩展程序界面")]),t._v(" "),n("p",[n("img",{attrs:{src:s(1061),alt:"xpath_helper插件安装-1"}})]),t._v(" "),n("p",[n("img",{attrs:{src:s(1062),alt:"xpath_helper插件安装-2"}})])]),t._v(" "),n("li",[n("p",[t._v("重启浏览器后，访问url之后在页面中点击xpath图标，就可以使用了")]),t._v(" "),n("p",[n("img",{attrs:{src:s(1063),alt:"xpath_helper插件安装-3"}})])]),t._v(" "),n("li",[n("p",[t._v("如果是"),n("strong",[t._v("linux或macOS操作系统")]),t._v("，无需操作上述的步骤2，直接将crx文件拖入已经开启开发者模式的chrome浏览器扩展程序界面")])])]),t._v(" "),n("hr"),t._v(" "),n("h5",{attrs:{id:"知识点-了解-谷歌浏览器xpath-helper插件的安装和使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#知识点-了解-谷歌浏览器xpath-helper插件的安装和使用"}},[t._v("#")]),t._v(" 知识点：了解 谷歌浏览器xpath helper插件的安装和使用")]),t._v(" "),n("hr"),t._v(" "),n("h2",{attrs:{id:"_3-xpath的节点关系"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-xpath的节点关系"}},[t._v("#")]),t._v(" 3. xpath的节点关系")]),t._v(" "),n("blockquote",[n("p",[t._v("学习xpath语法需要先了解xpath中的节点关系")])]),t._v(" "),n("h3",{attrs:{id:"_3-1-xpath中的节点是什么"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-xpath中的节点是什么"}},[t._v("#")]),t._v(" 3.1 xpath中的节点是什么")]),t._v(" "),n("blockquote",[n("p",[t._v("每个html、xml的标签我们都称之为节点，其中最顶层的节点称为根节点。我们以xml为例，html也是一样的")])]),t._v(" "),n("p",[n("img",{attrs:{src:s(1064),alt:"节点"}})]),t._v(" "),n("h3",{attrs:{id:"_3-2-xpath中节点的关系"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-xpath中节点的关系"}},[t._v("#")]),t._v(" 3.2 xpath中节点的关系")]),t._v(" "),n("p",[n("img",{attrs:{src:s(1065),alt:"xpath中节点的关系"}})]),t._v(" "),n("p",[n("strong",[n("code",[t._v("author")]),t._v("是"),n("code",[t._v("title")]),t._v("的第一个兄弟节点")])]),t._v(" "),n("h2",{attrs:{id:"_4-xpath语法-基础节点选择语法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-xpath语法-基础节点选择语法"}},[t._v("#")]),t._v(" 4. xpath语法-基础节点选择语法")]),t._v(" "),n("blockquote",[n("ol",[n("li",[t._v("XPath 使用路径表达式来选取 XML 文档中的节点或者节点集。")]),t._v(" "),n("li",[t._v("这些路径表达式和我们在常规的"),n("strong",[t._v("电脑文件系统中看到的表达式")]),t._v("非常相似。")]),t._v(" "),n("li",[n("strong",[t._v('使用chrome插件选择标签时候，选中时，选中的标签会添加属性class="xh-highlight"')])])])]),t._v(" "),n("h3",{attrs:{id:"_4-1-xpath定位节点以及提取属性或文本内容的语法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-xpath定位节点以及提取属性或文本内容的语法"}},[t._v("#")]),t._v(" 4.1 xpath定位节点以及提取属性或文本内容的语法")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("表达式")]),t._v(" "),n("th",[t._v("描述")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("nodename")]),t._v(" "),n("td",[t._v("选中该元素。")])]),t._v(" "),n("tr",[n("td",[t._v("/")]),t._v(" "),n("td",[t._v("从根节点选取、或者是元素和元素间的过渡。")])]),t._v(" "),n("tr",[n("td",[t._v("//")]),t._v(" "),n("td",[t._v("从匹配选择的当前节点选择文档中的节点，而不考虑它们的位置。")])]),t._v(" "),n("tr",[n("td",[t._v(".")]),t._v(" "),n("td",[t._v("选取当前节点。")])]),t._v(" "),n("tr",[n("td",[t._v("..")]),t._v(" "),n("td",[t._v("选取当前节点的父节点。")])]),t._v(" "),n("tr",[n("td",[t._v("@")]),t._v(" "),n("td",[t._v("选取属性。")])]),t._v(" "),n("tr",[n("td",[t._v("text()")]),t._v(" "),n("td",[t._v("选取文本。")])])])]),t._v(" "),n("h3",{attrs:{id:"_4-2-语法练习"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-语法练习"}},[t._v("#")]),t._v(" 4.2 语法练习")]),t._v(" "),n("blockquote",[n("p",[t._v("接下来我们通过itcast的页面来练习上述语法：http://www.itcast.cn/")])]),t._v(" "),n("ul",[n("li",[t._v("选择所有的h2下的文本\n"),n("ul",[n("li",[n("code",[t._v("//h2/text()")])])])]),t._v(" "),n("li",[t._v("获取所有的a标签的href\n"),n("ul",[n("li",[n("code",[t._v("//a/@href")])])])]),t._v(" "),n("li",[t._v("获取html下的head下的title的文本\n"),n("ul",[n("li",[n("code",[t._v("/html/head/title/text()")])])])]),t._v(" "),n("li",[t._v("获取html下的head下的link标签的href\n"),n("ul",[n("li",[n("code",[t._v("/html/head/link/@href")])])])])]),t._v(" "),n("hr"),t._v(" "),n("h5",{attrs:{id:"知识点-掌握-xpath语法-选取节点以及提取属性或文本内容的语法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#知识点-掌握-xpath语法-选取节点以及提取属性或文本内容的语法"}},[t._v("#")]),t._v(" 知识点：掌握 xpath语法-选取节点以及提取属性或文本内容的语法")]),t._v(" "),n("hr"),t._v(" "),n("h2",{attrs:{id:"_5-xpath语法-节点修饰语法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-xpath语法-节点修饰语法"}},[t._v("#")]),t._v(" 5. xpath语法-节点修饰语法")]),t._v(" "),n("blockquote",[n("p",[t._v("可以根据标签的属性值、下标等来获取特定的节点")])]),t._v(" "),n("h3",{attrs:{id:"_5-1-节点修饰语法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-节点修饰语法"}},[t._v("#")]),t._v(" 5.1 节点修饰语法")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("路径表达式")]),t._v(" "),n("th",[t._v("结果")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v('//title[@lang="eng"]')]),t._v(" "),n("td",[t._v("选择lang属性值为eng的所有title元素")])]),t._v(" "),n("tr",[n("td",[t._v("/bookstore/book[1]")]),t._v(" "),n("td",[t._v("选取属于 bookstore 子元素的第一个 book 元素。")])]),t._v(" "),n("tr",[n("td",[t._v("/bookstore/book[last()]")]),t._v(" "),n("td",[t._v("选取属于 bookstore 子元素的最后一个 book 元素。")])]),t._v(" "),n("tr",[n("td",[t._v("/bookstore/book[last()-1]")]),t._v(" "),n("td",[t._v("选取属于 bookstore 子元素的倒数第二个 book 元素。")])]),t._v(" "),n("tr",[n("td",[t._v("/bookstore/book[position()>1]")]),t._v(" "),n("td",[t._v("选择bookstore下面的book元素，从第二个开始选择")])]),t._v(" "),n("tr",[n("td",[t._v("//book/title[text()='Harry Potter']")]),t._v(" "),n("td",[t._v("选择所有book下的title元素，仅仅选择文本为Harry Potter的title元素")])]),t._v(" "),n("tr",[n("td",[t._v("/bookstore/book[price>35.00]/title")]),t._v(" "),n("td",[t._v("选取 bookstore 元素中的 book 元素的所有 title 元素，且其中的 price 元素的值须大于 35.00。")])])])]),t._v(" "),n("h3",{attrs:{id:"_5-2-关于xpath的下标"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-关于xpath的下标"}},[t._v("#")]),t._v(" 5.2 关于xpath的下标")]),t._v(" "),n("ul",[n("li",[t._v("在xpath中，第一个元素的位置是1")]),t._v(" "),n("li",[t._v("最后一个元素的位置是last()")]),t._v(" "),n("li",[t._v("倒数第二个是last()-1")])]),t._v(" "),n("h3",{attrs:{id:"_5-3-语法练习"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-语法练习"}},[t._v("#")]),t._v(" 5.3 语法练习")]),t._v(" "),n("blockquote",[n("p",[t._v("从itcast的页面中，选择所有学科的名称、第一个学科的链接、最后一个学科的链接：http://www.itcast.cn/")])]),t._v(" "),n("ul",[n("li",[t._v("所有的学科的名称\n"),n("ul",[n("li",[n("code",[t._v('//div[@class="nav_txt"]//a[@class="a_gd"]')])])])]),t._v(" "),n("li",[t._v("第一个学科的链接\n"),n("ul",[n("li",[n("code",[t._v('//div[@class="nav_txt"]/ul/li[1]/a/@href')])])])]),t._v(" "),n("li",[t._v("最后一个学科的链接\n"),n("ul",[n("li",[n("code",[t._v('//div[@class="nav_txt"]/ul/li[last()]/a/@href')])])])])]),t._v(" "),n("hr"),t._v(" "),n("h5",{attrs:{id:"知识点-掌握-xpath语法-选取特定节点的语法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#知识点-掌握-xpath语法-选取特定节点的语法"}},[t._v("#")]),t._v(" 知识点：掌握 xpath语法-选取特定节点的语法")]),t._v(" "),n("hr"),t._v(" "),n("h2",{attrs:{id:"_6-xpath语法-其他常用节点选择语法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-xpath语法-其他常用节点选择语法"}},[t._v("#")]),t._v(" 6. xpath语法-其他常用节点选择语法")]),t._v(" "),n("blockquote",[n("p",[t._v("可以通过"),n("strong",[t._v("通配符")]),t._v("来选取未知的html、xml的元素")])]),t._v(" "),n("h3",{attrs:{id:"_6-1-选取未知节点的语法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-选取未知节点的语法"}},[t._v("#")]),t._v(" 6.1 选取未知节点的语法")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("通配符")]),t._v(" "),n("th",[t._v("描述")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("*")]),t._v(" "),n("td",[t._v("匹配任何元素节点。")])]),t._v(" "),n("tr",[n("td",[t._v("node()")]),t._v(" "),n("td",[t._v("匹配任何类型的节点。")])])])]),t._v(" "),n("h3",{attrs:{id:"_6-2-语法练习"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-语法练习"}},[t._v("#")]),t._v(" 6.2 语法练习")]),t._v(" "),n("blockquote",[n("p",[t._v("从itcast的页面中 http://www.itcast.cn/ ，选中全部的标签、全部的属性")])]),t._v(" "),n("ul",[n("li",[t._v("全部的标签\n"),n("ul",[n("li",[n("code",[t._v("//*")])])])]),t._v(" "),n("li",[t._v("全部的属性\n"),n("ul",[n("li",[n("code",[t._v("//node()")])])])])]),t._v(" "),n("hr"),t._v(" "),n("h5",{attrs:{id:"知识点-掌握-xpath语法-选取位置节点的语法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#知识点-掌握-xpath语法-选取位置节点的语法"}},[t._v("#")]),t._v(" 知识点：掌握 xpath语法-选取位置节点的语法")]),t._v(" "),n("hr"),t._v(" "),n("h2",{attrs:{id:"_7-lxml模块的安装与使用示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7-lxml模块的安装与使用示例"}},[t._v("#")]),t._v(" 7. lxml模块的安装与使用示例")]),t._v(" "),n("blockquote",[n("p",[t._v("lxml模块是一个第三方模块，安装之后使用")])]),t._v(" "),n("h3",{attrs:{id:"_7-1-lxml模块的安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-lxml模块的安装"}},[t._v("#")]),t._v(" 7.1  lxml模块的安装")]),t._v(" "),n("p",[t._v("对发送请求获取的xml或html形式的响应内容进行提取")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("pip/pip3 install lxml\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("h5",{attrs:{id:"知识点-了解-lxml模块的安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#知识点-了解-lxml模块的安装"}},[t._v("#")]),t._v(" 知识点：了解 lxml模块的安装")]),t._v(" "),n("h3",{attrs:{id:"_7-2-爬虫对html提取的内容"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-爬虫对html提取的内容"}},[t._v("#")]),t._v(" 7.2 爬虫对html提取的内容")]),t._v(" "),n("ul",[n("li",[t._v("提取标签中的"),n("strong",[t._v("文本内容")])]),t._v(" "),n("li",[t._v("提取标签中的"),n("strong",[t._v("属性的值")]),t._v(" "),n("ul",[n("li",[t._v("比如，提取a标签中href属性的值，获取url，进而继续发起请求")])])])]),t._v(" "),n("h3",{attrs:{id:"_7-3-lxml模块的使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-lxml模块的使用"}},[t._v("#")]),t._v(" 7.3 lxml模块的使用")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("导入lxml 的 etree 库")]),t._v(" "),n("p",[n("code",[t._v("from lxml import etree")])])]),t._v(" "),n("li",[n("p",[t._v("利用etree.HTML，将html字符串（bytes类型或str类型）转化为Element对象，Element对象具有xpath的方法，返回结果的列表")]),t._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[t._v("html "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" etree"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HTML"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \nret_list "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xpath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xpath语法规则字符串"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])])]),t._v(" "),n("li",[n("p",[t._v("xpath方法返回列表的三种情况")]),t._v(" "),n("ul",[n("li",[t._v("返回空列表：根据xpath语法规则字符串，没有定位到任何元素")]),t._v(" "),n("li",[t._v("返回由字符串构成的列表：xpath字符串规则匹配的一定是文本内容或某属性的值")]),t._v(" "),n("li",[t._v("返回由Element对象构成的列表：xpath规则字符串匹配的是标签，列表中的Element对象可以继续进行xpath")])])])]),t._v(" "),n("h3",{attrs:{id:"_7-4-lxml模块使用示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7-4-lxml模块使用示例"}},[t._v("#")]),t._v(" 7.4 lxml模块使用示例")]),t._v(" "),n("blockquote",[n("p",[t._v("运行下面的代码，查看打印的结果")])]),t._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" lxml "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" etree\ntext "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('\'\'\' \n<div> \n  <ul> \n    <li class="item-1">\n      <a href="link1.html">first item</a>\n    </li> \n    <li class="item-1">\n      <a href="link2.html">second item</a>\n    </li> \n    <li class="item-inactive">\n      <a href="link3.html">third item</a>\n    </li> \n    <li class="item-1">\n      <a href="link4.html">fourth item</a>\n    </li> \n    <li class="item-0">\n      a href="link5.html">fifth item</a>\n  </ul> \n</div>\n\'\'\'')]),t._v("\n\nhtml "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" etree"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HTML"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#获取href的列表和title的列表")]),t._v("\nhref_list "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xpath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"//li[@class='item-1']/a/@href\"")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ntitle_list "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xpath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"//li[@class='item-1']/a/text()\"")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#组装成字典")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" href "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" href_list"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    item "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    item"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"href"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" href\n    item"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"title"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" title_list"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("href_list"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("href"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br")])]),n("h2",{attrs:{id:"_8-练习"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_8-练习"}},[t._v("#")]),t._v(" 8.练习")]),t._v(" "),n("blockquote",[n("p",[t._v("将下面的html文档字符串中，将每个class为item-1的li标签作为1条新闻数据。提取a标签的文本内容以及链接，组装成一个字典。")])]),t._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[t._v("\ntext "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('\'\'\' <div> <ul> \n        <li class="item-1"><a>first item</a></li> \n        <li class="item-1"><a href="link2.html">second item</a></li> \n        <li class="item-inactive"><a href="link3.html">third item</a></li> \n        <li class="item-1"><a href="link4.html">fourth item</a></li> \n        <li class="item-0"><a href="link5.html">fifth item</a> \n        </ul> </div> \n\'\'\'')]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" 注意：\n\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("先分组，再提取数据"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("，可以避免数据的错乱\n\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" 对于空值要进行判断\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" 参考代码\n\n  ```python\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" lxml "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" etree\n  text "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('\'\'\' \n\n<div> \n  <ul> \n    <li class="item-1">\n      <a href="link1.html">first item</a>\n    </li> \n    <li class="item-1">\n      <a href="link2.html">second item</a>\n    </li> \n    <li class="item-inactive">\n      <a href="link3.html">third item</a>\n    </li> \n    <li class="item-1">\n      <a href="link4.html">fourth item</a>\n    </li> \n    <li class="item-0">\n      a href="link5.html">fifth item</a>\n  </ul> \n</div>\'\'\'')]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#根据li标签进行分组")]),t._v("\n  html "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" etree"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HTML"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  li_list "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xpath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"//li[@class='item-1']\"")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#在每一组中继续进行数据的提取")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" li "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" li_list"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      item "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      item"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"href"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" li"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xpath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./a/@href"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("len")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("li"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xpath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./a/@href"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),t._v("\n      item"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"title"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" li"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xpath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./a/text()"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("len")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("li"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xpath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./a/text()"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br"),n("span",{staticClass:"line-number"},[t._v("43")]),n("br"),n("span",{staticClass:"line-number"},[t._v("44")]),n("br"),n("span",{staticClass:"line-number"},[t._v("45")]),n("br"),n("span",{staticClass:"line-number"},[t._v("46")]),n("br"),n("span",{staticClass:"line-number"},[t._v("47")]),n("br"),n("span",{staticClass:"line-number"},[t._v("48")]),n("br"),n("span",{staticClass:"line-number"},[t._v("49")]),n("br"),n("span",{staticClass:"line-number"},[t._v("50")]),n("br"),n("span",{staticClass:"line-number"},[t._v("51")]),n("br")])]),n("h5",{attrs:{id:"知识点-掌握-lxml模块中使用xpath语法定位元素提取属性值或文本内容"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#知识点-掌握-lxml模块中使用xpath语法定位元素提取属性值或文本内容"}},[t._v("#")]),t._v(" 知识点：掌握 lxml模块中使用xpath语法定位元素提取属性值或文本内容")]),t._v(" "),n("h2",{attrs:{id:"_9-lxml模块中etree-tostring函数的使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9-lxml模块中etree-tostring函数的使用"}},[t._v("#")]),t._v(" 9. lxml模块中etree.tostring函数的使用")]),t._v(" "),n("blockquote",[n("p",[t._v("运行下边的代码，观察对比html的原字符串和打印输出的结果")])]),t._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" lxml "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" etree\nhtml_str "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('\'\'\' <div> <ul> \n        <li class="item-1"><a href="link1.html">first item</a></li> \n        <li class="item-1"><a href="link2.html">second item</a></li> \n        <li class="item-inactive"><a href="link3.html">third item</a></li> \n        <li class="item-1"><a href="link4.html">fourth item</a></li> \n        <li class="item-0"><a href="link5.html">fifth item</a> \n        </ul> </div> \'\'\'')]),t._v("\n\nhtml "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" etree"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HTML"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html_str"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nhandeled_html_str "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" etree"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tostring"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("decode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handeled_html_str"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br")])]),n("h3",{attrs:{id:"_10-1-现象和结论"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_10-1-现象和结论"}},[t._v("#")]),t._v(" 10.1 现象和结论")]),t._v(" "),n("blockquote",[n("p",[t._v("打印结果和原来相比：")]),t._v(" "),n("ol",[n("li",[t._v("自动补全原本缺失的"),n("code",[t._v("li")]),t._v("标签")]),t._v(" "),n("li",[t._v("自动补全"),n("code",[t._v("html")]),t._v("等标签")])])]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ul")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("item-1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("link1.html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("first item"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("item-1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("link2.html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("second item"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("item-inactive"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("link3.html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("third item"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("item-1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("link4.html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("fourth item"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("item-0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("link5.html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("fifth item"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("ul")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br")])]),n("p",[n("strong",[t._v("结论")]),t._v("：")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("lxml.etree.HTML(html_str)可以自动补全标签")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("lxml.etree.tostring")]),t._v("函数可以将转换为Element对象再转换回html字符串")])]),t._v(" "),n("li",[n("p",[t._v("爬虫如果使用lxml来提取数据，应该以"),n("code",[t._v("lxml.etree.tostring")]),t._v("的返回结果作为提取数据的依据")])])]),t._v(" "),n("h5",{attrs:{id:"知识点-掌握-lxml模块中etree-tostring函数的使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#知识点-掌握-lxml模块中etree-tostring函数的使用"}},[t._v("#")]),t._v(" 知识点：掌握 lxml模块中etree.tostring函数的使用")])])}),[],!1,null,null,null);a.default=e.exports}}]);